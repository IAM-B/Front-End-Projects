<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shaders</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>

    <article
      class="w-full text-token-text-primary focus-visible:outline-2 focus-visible:outline-offset-[-4px]"
      dir="auto"
      data-testid="conversation-turn-5"
      data-scroll-anchor="true"
    >
      <h6 class="sr-only">ChatGPT a dit&nbsp;:</h6>
      <div
        class="text-base py-[18px] px-3 md:px-4 m-auto w-full md:px-5 lg:px-4 xl:px-5"
      >
        <div
          class="mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]"
        >
          <div
            class="group/conversation-turn relative flex w-full min-w-0 flex-col agent-turn"
          >
            <div class="flex-col gap-1 md:gap-3">
              <div class="flex max-w-full flex-col flex-grow">
                <div
                  data-message-author-role="assistant"
                  data-message-id="2382e38b-daf7-4c9a-a3b8-b326dc9f1d29"
                  dir="auto"
                  class="min-h-8 text-message flex w-full flex-col items-end gap-2 whitespace-normal break-words [.text-message+&amp;]:mt-5"
                >
                  <div
                    class="flex w-full flex-col gap-1 empty:hidden first:pt-[3px]"
                  >
                    <div
                      class="markdown prose w-full break-words dark:prose-invert dark"
                    >
                      <h3>Introduction</h3>
                      <p>
                        00:00<br />Cette leçon est probablement la plus
                        attendue. Nous avons déjà parlé des <em>shaders</em>, et
                        c'est le sujet le plus exigeant.
                      </p>
                      <p>
                        Le plus amusant, c'est que nous les utilisons depuis le
                        début. Lorsque nous créons des matériaux intégrés de
                        Three.js, ces matériaux sont composés de
                        <em>shaders</em>. Tout ce qui apparaît sur le rendu
                        WebGL est rendu possible grâce aux <em>shaders</em>,
                        mais il est temps de les créer nous-mêmes.
                      </p>
                      <p>
                        Nous allons commencer par expliquer ce que sont les
                        <em>shaders</em> et quand les utiliser. Ensuite, nous
                        créerons nos propres <em>shaders</em> très simples. Nous
                        aborderons, bien sûr, la syntaxe du langage des
                        <em>shaders</em>. Et enfin, nous ferons quelques
                        exercices pour pratiquer des situations classiques.
                      </p>
                      <h3>Qu'est-ce qu'un shader ?</h3>
                      <p>
                        01:19<br />Un <em>shader</em> est, en fait, l'un des
                        principaux composants de WebGL. Si nous avions commencé
                        WebGL sans Three.js, cela aurait été l'une des premières
                        choses que nous aurions dû apprendre, et c'est pourquoi
                        le WebGL natif est si difficile.
                      </p>
                      <p>
                        Un <em>shader</em> est un programme écrit en GLSL qui
                        est envoyé au GPU. Ils sont utilisés pour positionner
                        chaque sommet d'une géométrie et pour colorier chaque
                        <em>pixel</em> visible de cette géométrie. Le terme
                        "pixel" n'est pas tout à fait exact car chaque point du
                        rendu ne correspond pas nécessairement à chaque pixel de
                        l'écran et c'est pourquoi nous préférons utiliser le
                        terme "fragment". Ne soyez donc pas surpris si vous
                        voyez les deux termes.
                      </p>
                      <p>
                        Ensuite, nous envoyons beaucoup de données au
                        <em>shader</em> telles que les coordonnées des sommets,
                        la transformation du maillage, des informations sur la
                        caméra et son champ de vision, des paramètres comme la
                        couleur, les textures, les lumières, le brouillard, etc.
                        Le GPU traite ensuite toutes ces données en suivant les
                        instructions du <em>shader</em>, et notre géométrie
                        apparaît dans le rendu.
                      </p>
                      <p>
                        Il existe deux types de <em>shaders</em>, et nous avons
                        besoin des deux.
                      </p>
                      <h3>Vertex Shader</h3>
                      <p>
                        Le but du <em>vertex shader</em> est de positionner les
                        sommets de la géométrie. L'idée est d'envoyer les
                        positions des sommets, les transformations du maillage
                        (comme sa position, rotation et échelle), les
                        informations de la caméra (comme sa position, rotation
                        et champ de vision). Ensuite, le GPU suivra les
                        instructions dans le <em>vertex shader</em> pour traiter
                        toutes ces informations afin de projeter les sommets
                        dans un espace 2D qui deviendra notre rendu — en
                        d'autres termes, notre <em>canvas</em>.
                      </p>
                      <p>
                        Lorsqu'un <em>vertex shader</em> est utilisé, son code
                        sera appliqué sur chaque sommet de la géométrie. Mais
                        certaines données comme la position du sommet changeront
                        d'un sommet à l'autre. Ce type de données — celles qui
                        changent entre les sommets — est appelé un
                        <em>attribute</em>. Mais certaines données n'ont pas
                        besoin de changer entre chaque sommet, comme la position
                        du maillage. Oui, l'emplacement du maillage affectera
                        tous les sommets, mais de la même manière. Ce type de
                        données — celles qui ne changent pas entre les sommets —
                        est appelé un <em>uniform</em>. Nous reviendrons sur les
                        <em>attributes</em> et les <em>uniforms</em> plus tard.
                      </p>
                      <p>
                        Le <em>vertex shader</em> est exécuté en premier. Une
                        fois que les sommets sont placés, le GPU sait quels
                        pixels de la géométrie sont visibles et peut passer au
                        <em>fragment shader</em>.
                      </p>
                      <h3>Fragment Shader</h3>
                      <p>
                        Le but du <em>fragment shader</em> est de colorier
                        chaque <em>fragment</em> visible de la géométrie.
                      </p>
                      <p>
                        Le même <em>fragment shader</em> sera utilisé pour
                        chaque <em>fragment</em> visible de la géométrie. Nous
                        pouvons lui envoyer des données comme une couleur en
                        utilisant des <em>uniforms</em> — tout comme le
                        <em>vertex shader</em>, ou nous pouvons envoyer des
                        données du <em>vertex shader</em> au
                        <em>fragment shader</em>. Nous appelons ce type de
                        données — celles qui passent du
                        <em>vertex shader</em> au <em>fragment shader</em> — des
                        <em>varying</em>. Nous reviendrons sur cela plus tard.
                      </p>
                      <p>
                        L'instruction la plus simple dans un
                        <em>fragment shader</em> peut être de colorier tous les
                        fragments de la même couleur. Nous obtenons alors
                        l'équivalent du <code>MeshBasicMaterial</code> — si nous
                        avions défini uniquement la propriété
                        <code>color</code>.
                      </p>
                      <p>
                        Ou nous pouvons envoyer plus de données au
                        <em>shader</em>, par exemple, une position de lumière.
                        Nous pouvons alors colorier les fragments en fonction de
                        la quantité de la face qui est orientée vers la source
                        de lumière. Nous obtiendrions l'équivalent du
                        <code>MeshPhongMaterial</code> — si nous avions une
                        lumière dans la scène.
                      </p>
                      <h3>Résumé</h3>
                      <p>
                        Le <em>vertex shader</em> positionne les sommets dans le
                        rendu.
                      </p>
                      <p>
                        Le <em>fragment shader</em> colore chaque
                        <em>fragment</em> visible (ou pixel) de cette géométrie.
                      </p>
                      <p>
                        Le <em>fragment shader</em> est exécuté après le
                        <em>vertex shader</em>.
                      </p>
                      <p>
                        Les données qui changent entre chaque sommet (comme leur
                        position) sont appelées <em>attributes</em> et ne
                        peuvent être utilisées que dans le
                        <em>vertex shader</em>.
                      </p>
                      <p>
                        Les données qui ne changent pas entre les sommets (comme
                        la position du maillage ou une couleur) sont appelées
                        <em>uniforms</em> et peuvent être utilisées à la fois
                        dans le <em>vertex shader</em> et le
                        <em>fragment shader</em>.
                      </p>
                      <p>
                        Nous pouvons envoyer des données du
                        <em>vertex shader</em> au <em>fragment shader</em> en
                        utilisant des <em>varying</em>.
                      </p>
                      <h3>Pourquoi écrire nos propres shaders ?</h3>
                      <p>
                        20:27<br />Les matériaux de Three.js tentent de couvrir
                        autant de situations que possible, mais ils ont des
                        limitations. Si nous voulons dépasser ces limites, nous
                        devons écrire nos propres <em>shaders</em>.
                      </p>
                      <p>
                        Cela peut également être pour des raisons de
                        performance. Des matériaux comme
                        <code>MeshStandardMaterial</code> sont très élaborés et
                        impliquent beaucoup de code et de calculs. Si nous
                        écrivons notre propre <em>shader</em>, nous pouvons
                        limiter les fonctionnalités et les calculs au minimum.
                        Nous avons ainsi plus de contrôle sur les performances.
                      </p>
                      <p>
                        Écrire notre propre <em>shader</em> est également un
                        excellent moyen d'ajouter des post-traitements à notre
                        rendu, mais nous verrons cela dans une leçon dédiée.
                      </p>
                      <p>
                        Une fois que vous maîtrisez les <em>shaders</em>, ils
                        deviendront indispensables dans tous vos projets.
                      </p>
                      <h3>Créer nos premiers shaders avec RawShaderMaterial</h3>
                      <p>
                        22:21<br />Pour créer notre premier <em>shader</em>,
                        nous devons créer un matériau particulier. Ce matériau
                        peut être un <code>ShaderMaterial</code> ou un
                        <code>RawShaderMaterial</code>. La différence entre ces
                        deux est que le <code>ShaderMaterial</code> aura du code
                        automatiquement ajouté au code du <em>shader</em>,
                        tandis que le <code>RawShaderMaterial</code>, comme son
                        nom l'indique, n'aura rien.
                      </p>
                      <p>
                        Nous commencerons avec le
                        <code>RawShaderMaterial</code> pour mieux comprendre ce
                        qui se passe.
                      </p>
                      <p>
                        Le démarrage contient un simple plan avec un
                        <code>MeshBasicMaterial</code> appliqué dessus.
                      </p>
                      <p>
                        Remplacez ce <code>MeshBasicMaterial</code> par un
                        <code>RawShaderMaterial</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>()

</code></div></div></pre>
                      <p>Vous devriez obtenir une erreur.</p>
                      <p>
                        Comme nous l'avons dit plus tôt, nous devons fournir à
                        la fois le <em>vertex shader</em> et le
                        <em>fragment shader</em>. Vous pouvez le faire avec les
                        propriétés <code>vertexShader</code> et
                        <code>fragmentShader</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">''</span>
})

</code></div></div></pre>
                      <p>
                        Le problème avec cette technique est que les simples
                        guillemets ne peuvent contenir qu'une seule ligne — les
                        doubles guillemets aussi. Nos <em>shaders</em> — même
                        s'ils sont simples au début, seront trop longs pour être
                        écrits sur une seule ligne.
                      </p>
                      <p>
                        Une solution fiable est d'utiliser les accents graves —
                        également appelés <em>backticks</em>, guillemets
                        inversés ou accents ouverts. La plupart des navigateurs
                        modernes les prennent en charge. Cette technique est
                        appelée <em>template literals</em>, et nous pouvons les
                        utiliser pour insérer des sauts de ligne.
                      </p>
                      <p>
                        La touche ou le raccourci pour écrire ce caractère
                        dépend de votre clavier. Voici un fil de discussion sur
                        le sujet pour vous aider :
                        <a
                          rel="noopener"
                          target="_new"
                          style="
                            --streaming-animation-state: var(
                              --batch-play-state-1
                            );
                            --animation-rate: var(--batch-play-rate-1);
                          "
                          href="https://superuser.com/questions/254076/how-do-i-type-the-tick-and-backtick-characters-on-windows/879277"
                          ><span
                            style="
                              --animation-count: 0;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >https</span
                          ><span
                            style="
                              --animation-count: 1;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >://superuser</span
                          ><span
                            style="
                              --animation-count: 2;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >.com</span
                          ><span
                            style="
                              --animation-count: 3;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/questions</span
                          ><span
                            style="
                              --animation-count: 4;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/254076</span
                          ><span
                            style="
                              --animation-count: 5;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/how</span
                          ><span
                            style="
                              --animation-count: 6;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-do</span
                          ><span
                            style="
                              --animation-count: 7;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-i</span
                          ><span
                            style="
                              --animation-count: 8;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-type</span
                          ><span
                            style="
                              --animation-count: 9;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-the</span
                          ><span
                            style="
                              --animation-count: 10;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-tick</span
                          ><span
                            style="
                              --animation-count: 11;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-and</span
                          ><span
                            style="
                              --animation-count: 12;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-backtick</span
                          ><span
                            style="
                              --animation-count: 13;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-characters</span
                          ><span
                            style="
                              --animation-count: 14;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-on</span
                          ><span
                            style="
                              --animation-count: 15;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-windows</span
                          ><span
                            style="
                              --animation-count: 16;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/879277</span
                          ></a
                        >.
                      </p>
                      <p>
                        Une fois que vous avez trouvé la touche, changez vos
                        simples guillemets par des accents graves :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">``</span>,
  <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">``</span>
})

</code></div></div></pre>
                      <p>
                        Nous pouvons enfin écrire nos <em>shaders</em>. Copiez
                        simplement le code, nous expliquerons tout plus tard :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">`
      uniform mat4 projectionMatrix;
      uniform mat4 viewMatrix;
      uniform mat4 modelMatrix;

      attribute vec3 position;

      void main()
      {
          gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
      }
  `</span>,
  <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">`
      precision mediump float;

      void main()
      {
          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
      }
  `</span>
})

</code></div></div></pre>
                    </div>
                  </div>
                </div>
              </div>
              -
              <p class="is-image">
                <span class="image-inner"
                  ><img
                    data-src="/assets/lessons/24/000.png"
                    src="https://threejs-journey.com/assets/lessons/24/000.png"
                    width="1792"
                    height="1120"
                    class="is-loaded"
                /></span>
              </p>
              <div class="pr-2 lg:pr-0"></div>
              <div class="mt-3 w-full empty:hidden">
                <div class="text-center"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article
      class="w-full text-token-text-primary focus-visible:outline-2 focus-visible:outline-offset-[-4px]"
      dir="auto"
      data-testid="conversation-turn-7"
      data-scroll-anchor="true"
    >
      <h6 class="sr-only">ChatGPT a dit&nbsp;:</h6>
      <div
        class="text-base py-[18px] px-3 md:px-4 m-auto w-full md:px-5 lg:px-4 xl:px-5"
      >
        <div
          class="mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]"
        >
          <div
            class="group/conversation-turn relative flex w-full min-w-0 flex-col agent-turn"
          >
            <div class="flex-col gap-1 md:gap-3">
              <div class="flex max-w-full flex-col flex-grow">
                <div
                  data-message-author-role="assistant"
                  data-message-id="2a7f1179-e4f7-4706-8ad5-fc6bf4ccab63"
                  dir="auto"
                  class="min-h-8 text-message flex w-full flex-col items-end gap-2 whitespace-normal break-words [.text-message+&amp;]:mt-5"
                >
                  <div
                    class="flex w-full flex-col gap-1 empty:hidden first:pt-[3px]"
                  >
                    <div
                      class="markdown prose w-full break-words dark:prose-invert dark"
                    >
                      <p>
                        Vous devriez obtenir un plan rouge. Félicitations, vous
                        ne comprenez peut-être pas encore ce qui est écrit ici,
                        mais c'est votre premier <em>shader</em> et un bon début
                        pour un voyage incroyable.
                      </p>
                      <h3>Séparer les shaders dans différents fichiers</h3>
                      <p>
                        29:33<br />Avant de plonger dans le code lui-même,
                        essayons d'améliorer notre façon de travailler. Les
                        accents graves sont une excellente solution pour le code
                        de petite taille, et nous les utiliserons dans les
                        prochaines leçons avec les <em>shaders</em>, mais il
                        nous manque la coloration syntaxique. Une fois que nous
                        aurons plusieurs <em>shaders</em> avec beaucoup de code,
                        notre script deviendra difficile à gérer. Avoir une
                        configuration agréable et confortable est essentiel.
                      </p>
                      <h4>Fichiers Shader</h4>
                      <p>
                        Nous allons déplacer le code dans des fichiers séparés.
                        Tout d'abord, déplacez le code du
                        <em>vertex shader</em> et du
                        <em>fragment shader</em> respectivement dans
                        <code>/src/shaders/test/vertex.glsl</code> et
                        <code>/src/shaders/test/fragment.glsl</code>.
                      </p>
                      <p>
                        Même si nous n'avons qu'un seul <em>shader</em> dans
                        notre projet, il est judicieux de séparer et d'organiser
                        notre code du mieux possible. Les projets conséquents
                        peuvent contenir des dizaines de
                        <em>shaders</em> personnalisés.
                      </p>
                      <p>
                        À moins que votre éditeur de code ne prenne déjà en
                        charge le GLSL, la coloration syntaxique ne fonctionne
                        probablement pas pour ces deux nouveaux fichiers. Pour
                        ajouter la coloration syntaxique, si vous utilisez
                        VSCode, allez dans vos plugins, recherchez "shader" et
                        installez le plugin
                        <strong>Shader languages support for VS Code</strong>.
                        Si vous utilisez un autre éditeur de code, recherchez
                        des plugins compatibles en tenant compte de leur
                        popularité et des avis.
                      </p>
                      <p>
                        Une fois installé, vous devriez avoir une belle
                        coloration syntaxique sur les fichiers
                        <code>.glsl</code>. Si ce n'est pas le cas, essayez de
                        redémarrer votre éditeur de code.
                      </p>
                      <p>
                        La coloration syntaxique est agréable, mais avoir un
                        <em>linter</em> est encore mieux. Un
                        <em>linter</em> validera votre code et détectera les
                        erreurs potentielles pendant que vous le rédigez. Cela
                        peut être très utile pour éviter les erreurs basiques
                        sans avoir à tester le résultat dans le navigateur.
                      </p>
                      <p>
                        Nous n'utiliserons pas de <em>linter</em> dans les
                        leçons suivantes car son installation peut être
                        compliquée, mais si vous souhaitez essayer, je vous
                        recommande de regarder cette vidéo sur la chaîne Youtube
                        de Lewis Lepton :
                        <a
                          rel="noopener"
                          target="_new"
                          style="
                            --streaming-animation-state: var(
                              --batch-play-state-1
                            );
                            --animation-rate: var(--batch-play-rate-1);
                          "
                          href="https://www.youtube.com/watch?v=NQ-g6v7GtoI"
                          ><span
                            style="
                              --animation-count: 1;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >https</span
                          ><span
                            style="
                              --animation-count: 2;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >://www</span
                          ><span
                            style="
                              --animation-count: 3;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >.youtube</span
                          ><span
                            style="
                              --animation-count: 4;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >.com</span
                          ><span
                            style="
                              --animation-count: 5;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/watch</span
                          ><span
                            style="
                              --animation-count: 6;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >?v</span
                          ><span
                            style="
                              --animation-count: 7;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >=NQ</span
                          ><span
                            style="
                              --animation-count: 8;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-g6v7GtoI</span
                          ></a
                        >.
                      </p>
                      <p>
                        Le <em>linter</em> produira également des erreurs sur
                        des <em>shaders</em> incomplets, ce qui est un problème
                        car nous allons écrire des <em>shaders</em> partiels un
                        peu plus tard dans la leçon. C'est à vous de voir, mais
                        vous pouvez essayer si vous le souhaitez.
                      </p>
                      <h3>Importation</h3>
                      <p>
                        Essayons d'importer les fichiers dans notre script :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">import</span> testVertexShader <span class="hljs-keyword">from</span> <span class="hljs-string">'./shaders/test/vertex.glsl'</span>
<span class="hljs-keyword">import</span> testFragmentShader <span class="hljs-keyword">from</span> <span class="hljs-string">'./shaders/test/fragment.glsl'</span>

</code></div></div></pre>
                      <p>
                        Malheureusement, nous obtenons une erreur car notre
                        projet ne sait pas comment gérer les fichiers
                        <code>.glsl</code>.
                      </p>
                      <p>
                        La bonne nouvelle, c'est qu'il existe déjà des solutions
                        pour ajouter la prise en charge des
                        <em>shaders</em> dans Vite :
                      </p>
                      <ul>
                        <li><strong>vite-plugin-glsl</strong></li>
                        <li><strong>vite-plugin-glslify</strong></li>
                      </ul>
                      <p>
                        Mais comme nous avons le choix, lequel devrions-nous
                        utiliser ?
                      </p>
                      <p>
                        Pour l'instant, nous voulons simplement pouvoir importer
                        des fichiers <code>.glsl</code> et les deux plugins le
                        font parfaitement. La différence se situe au niveau des
                        fonctionnalités plus spécifiques, l'un d'entre eux
                        permettant d'inclure des fichiers <em>shader</em> dans
                        d'autres fichiers <em>shader</em>.
                      </p>
                      <p>Cela devient utile dans trois situations :</p>
                      <ol>
                        <li>
                          Lorsque nous avons de grands <em>shaders</em> et que
                          nous voulons les diviser en fichiers plus petits.
                        </li>
                        <li>
                          Lorsque nous avons le même morceau de code dans
                          plusieurs <em>shaders</em> et que nous voulons pouvoir
                          le modifier à partir d'un seul fichier.
                        </li>
                        <li>
                          Lorsque nous voulons utiliser des fragments de
                          <em>shaders</em> externes créés par d'autres
                          développeurs.
                        </li>
                      </ol>
                      <p>
                        Les deux plugins, <strong>vite-plugin-glsl</strong> et
                        <strong>vite-plugin-glslify</strong>, peuvent le faire,
                        mais avec une syntaxe différente. GLSLIFY est un peu le
                        standard de nos jours, mais j'ai trouvé
                        <strong>vite-plugin-glsl</strong> plus facile à
                        utiliser, c'est pourquoi nous allons l'utiliser plutôt
                        que <strong>vite-plugin-glslify</strong>. Notez
                        également que le plugin est bien maintenu.
                      </p>
                      <p>
                        Cependant, si à un moment vous devez implémenter
                        <strong>vite-plugin-glslify</strong>, le processus est
                        exactement le même et vous devriez pouvoir le faire par
                        vous-même.
                      </p>
                      <p>
                        Pour installer <strong>vite-plugin-glsl</strong>, dans
                        le terminal, fermez le serveur et exécutez la commande
                        suivante :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">bash</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-bash">
npm install vite-plugin-glsl

</code></div></div></pre>
                      <p>
                        Ensuite, allez dans le fichier
                        <code>vite.config.js</code> et, en haut, importez
                        <code>glsl</code> depuis
                        <strong>vite-plugin-glsl</strong> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">import</span> glsl <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-glsl'</span>

</code></div></div></pre>
                      <p>
                        Dans le tableau des plugins, ajoutez un appel à la
                        fonction <code>glsl</code> (n'oubliez pas le
                        <code>;</code> après <code>restart(…)</code>):
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">import</span> glsl <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-glsl'</span>

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">plugins</span>:
  [
      <span class="hljs-title function_">restart</span>({ <span class="hljs-attr">restart</span>: [ <span class="hljs-string">'../static/**'</span>, ] }), <span class="hljs-comment">// Redémarre le serveur sur changement de fichiers statiques</span>
      <span class="hljs-title function_">glsl</span>() <span class="hljs-comment">// Gère les fichiers shader</span>
  ]
}

</code></div></div></pre>
                      <p>
                        Et c'est tout ce qu'il faut pour ajouter des plugins à
                        Vite. Enregistrez le fichier
                        <code>vite.config.js</code>, redémarrez le serveur et
                        les <em>shaders</em> devraient être correctement
                        importés.
                      </p>
                      <p>
                        Si vous affichez <code>testVertexShader</code> et
                        <code>testFragmentShader</code> dans la console, vous
                        obtiendrez les codes des <em>shaders</em> sous forme de
                        chaîne de caractères :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">import</span> testVertexShader <span class="hljs-keyword">from</span> <span class="hljs-string">'./shaders/test/vertex.glsl'</span>
<span class="hljs-keyword">import</span> testFragmentShader <span class="hljs-keyword">from</span> <span class="hljs-string">'./shaders/test/fragment.glsl'</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(testVertexShader)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(testFragmentShader)

</code></div></div></pre>
                      <p>
                        Supprimez ces affichages dans la console et utilisez les
                        deux <em>shaders</em> dans le
                        <code>RawShaderMaterial</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader
})

</code></div></div></pre>
                    </div>
                  </div>
                </div>
              </div>
              -
              <div class="pr-2 lg:pr-0"></div>
              <div class="mt-3 w-full empty:hidden">
                <div class="text-center"></div>
                <p class="is-image">
                  <span class="image-inner"
                    ><img
                      data-src="/assets/lessons/24/001.png"
                      src="https://threejs-journey.com/assets/lessons/24/001.png"
                      width="1792"
                      height="1120"
                      class="is-loaded"
                  /></span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article
      class="w-full text-token-text-primary focus-visible:outline-2 focus-visible:outline-offset-[-4px]"
      dir="auto"
      data-testid="conversation-turn-9"
      data-scroll-anchor="true"
    >
      <h6 class="sr-only">ChatGPT a dit&nbsp;:</h6>
      <div
        class="text-base py-[18px] px-3 md:px-4 m-auto w-full md:px-5 lg:px-4 xl:px-5"
      >
        <div
          class="mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]"
        >
          <div
            class="group/conversation-turn relative flex w-full min-w-0 flex-col agent-turn"
          >
            <div class="flex-col gap-1 md:gap-3">
              <div class="flex max-w-full flex-col flex-grow">
                <div
                  data-message-author-role="assistant"
                  data-message-id="f47ea19d-00d4-4d28-927d-7cc4f84919bb"
                  dir="auto"
                  class="text-message flex w-full flex-col items-end gap-2 whitespace-normal break-words [.text-message+&amp;]:mt-5"
                >
                  <div
                    class="flex w-full flex-col gap-1 empty:hidden first:pt-[3px]"
                  >
                    <div
                      class="markdown prose w-full break-words dark:prose-invert dark"
                    >
                      <h3>PROPRIÉTÉS</h3>
                      <p>
                        La plupart des propriétés communes que nous avons
                        couvertes avec d'autres matériaux, comme
                        <code>wireframe</code>, <code>side</code>,
                        <code>transparent</code> ou <code>flatShading</code>,
                        sont toujours disponibles pour le
                        <code>RawShaderMaterial</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">wireframe</span>: <span class="hljs-literal">true</span>
})

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/002.png"
                            src="https://threejs-journey.com/assets/lessons/24/002.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Mais des propriétés comme <code>map</code>,
                        <code>alphaMap</code>, <code>opacity</code>,
                        <code>color</code>, etc., ne fonctionneront plus car
                        nous devons implémenter ces fonctionnalités nous-mêmes
                        dans les <em>shaders</em>.
                      </p>
                      <p>
                        Commentez ou supprimez la ligne <code>wireframe</code>.
                      </p>
                      <h3>GLSL</h3>
                      <p>
                        45:53<br />Le langage utilisé pour coder les
                        <em>shaders</em> s'appelle GLSL et signifie
                        <em>OpenGL Shading Language</em>. Il est proche du
                        langage C. Apprenons les bases de sa syntaxe.
                      </p>
                      <h4>Journalisation</h4>
                      <p>
                        Il n'y a pas de console et donc aucun moyen de consigner
                        des valeurs. Cela est dû au fait que le code est exécuté
                        pour chaque sommet et chaque fragment. Il serait inutile
                        de consigner une seule valeur.
                      </p>
                      <h4>Indentation</h4>
                      <p>
                        L'indentation n'est pas essentielle. Vous pouvez
                        l'adapter à votre convenance.
                      </p>
                      <h4>Point-virgule</h4>
                      <p>
                        Le point-virgule est requis pour terminer chaque
                        instruction. Oublier un seul point-virgule entraînera
                        probablement une erreur de compilation et tout le
                        matériau ne fonctionnera pas.
                      </p>
                      <h4>Variables</h4>
                      <p>
                        C'est un langage typé, ce qui signifie que nous devons
                        spécifier le type d'une variable, et nous ne pouvons pas
                        assigner un autre type à cette variable.
                      </p>
                      <p>
                        Pour déclarer une variable, nous devons commencer par le
                        type, suivi du nom (généralement en <em>camelCase</em>),
                        puis du signe <code>=</code> et de la valeur, et enfin
                        terminer par un <code>;</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float fooBar = 0.123;

</code></div></div></pre>
                      <p>Il existe plusieurs types différents.</p>
                      <h4>Float</h4>
                      <p>
                        Les floats sont des nombres décimaux. Ils peuvent être
                        négatifs ou positifs. Nous devons toujours fournir le
                        <code>.</code> des décimales, même si la valeur est
                        entière :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float foo = -0.123;
float bar = 1.0;

</code></div></div></pre>
                      <p>
                        Nous pouvons faire des opérations mathématiques comme
                        <code>+</code>, <code>-</code>, <code>*</code> et
                        <code>/</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float a = 1.0;
float b = 2.0;
float c = a / b;

</code></div></div></pre>
                      <h4>Integer</h4>
                      <p>
                        Les entiers fonctionnent comme les floats, mais sans le
                        point <code>.</code> des décimales :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
int foo = 123;
int bar = -1;

</code></div></div></pre>
                      <p>
                        Nous pouvons aussi faire des opérations mathématiques :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
int a = 1;
int b = 2;
int c = a * b;

</code></div></div></pre>
                      <p>
                        Mais nous ne pouvons pas mélanger float et int dans ces
                        opérations :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float a = 1.0;
int b = 2;
float c = a * b;

</code></div></div></pre>
                      <p>
                        Nous pouvons cependant convertir les types à la volée :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float a = 1.0;
int b = 2;
float c = a * float(b);

</code></div></div></pre>
                      <h4>Boolean</h4>
                      <p>
                        Les booléens sont simplement des valeurs de type booléen
                        :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
bool foo = true;
bool bar = false;

</code></div></div></pre>
                      <h4>Vector 2</h4>
                      <p>
                        C'est ici que les choses deviennent intéressantes. Si
                        nous voulons stocker des valeurs comme 2 coordonnées
                        avec des propriétés <code>x</code> et <code>y</code>,
                        nous pouvons utiliser un <code>vec2</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec2 foo = vec2(1.0, 2.0);

</code></div></div></pre>
                      <p>Un <code>vec2</code> vide entraînera une erreur :</p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec2 foo = vec2();

</code></div></div></pre>
                      <p>
                        Nous pouvons modifier ces propriétés après avoir créé le
                        <code>vec2</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec2 foo = vec2(0.0);
foo.x = 1.0;
foo.y = 2.0;

</code></div></div></pre>
                      <p>
                        Faire des opérations comme multiplier un
                        <code>vec2</code> par un float appliquera l'opération
                        sur les propriétés <code>x</code> et <code>y</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec2 foo = vec2(1.0, 2.0);
foo *= 2.0;

</code></div></div></pre>
                      <h4>Vector 3</h4>
                      <p>
                        <code>vec3</code> est similaire à <code>vec2</code>,
                        mais avec une troisième propriété nommée <code>z</code>.
                        C'est très pratique quand on a besoin de coordonnées 3D
                        :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec3 foo = vec3(0.0);
vec3 bar = vec3(1.0, 2.0, 3.0);
bar.z = 4.0;

</code></div></div></pre>
                      <p>
                        Bien que nous puissions utiliser <code>x</code>,
                        <code>y</code> et <code>z</code>, nous pouvons également
                        utiliser <code>r</code>, <code>g</code> et
                        <code>b</code>. C'est un simple raccourci de syntaxe, et
                        le résultat est exactement le même. C'est très utile
                        lorsque nous utilisons un <code>vec3</code> pour stocker
                        des couleurs :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec3 purpleColor = vec3(0.0);
purpleColor.r = 0.5;
purpleColor.b = 1.0;

</code></div></div></pre>
                      <p>
                        Un <code>vec3</code> peut aussi être partiellement créé
                        à partir d'un <code>vec2</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec2 foo = vec2(1.0, 2.0);
vec3 bar = vec3(foo, 3.0);

</code></div></div></pre>
                      <p>
                        Nous pouvons également utiliser une partie du
                        <code>vec3</code> pour générer un <code>vec2</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec3 foo = vec3(1.0, 2.0, 3.0);
vec2 bar = foo.xy;

</code></div></div></pre>
                      <p>
                        Ici, <code>bar</code> sera un <code>vec2</code> avec
                        <code>1.0</code> et <code>2.0</code> comme valeurs.
                      </p>
                      <p>
                        C'est ce qu'on appelle un <em>swizzle</em> et nous
                        pouvons aussi utiliser les propriétés dans un ordre
                        différent :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec3 foo = vec3(1.0, 2.0, 3.0);
vec2 bar = foo.yx;

</code></div></div></pre>
                      <h4>Vector 4</h4>
                      <p>
                        Enfin, le <code>vec4</code> fonctionne comme ses deux
                        prédécesseurs mais avec une quatrième valeur nommée
                        <code>w</code> ou <code>a</code> — <code>w</code> car il
                        n'y a pas de lettre après <code>z</code> dans l'alphabet
                        et <code>a</code> pour "alpha" :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
vec4 foo = vec4(1.0, 2.0, 3.0, 4.0);
vec4 bar = vec4(foo.zw, vec2(5.0, 6.0));

</code></div></div></pre>
                      <p>
                        Il existe d'autres types de variables tels que
                        <code>mat2</code>, <code>mat3</code>,
                        <code>mat4</code> ou <code>sampler2D</code>, mais nous
                        les verrons plus tard.
                      </p>
                      <h3>Fonctions</h3>
                      <p>
                        Comme dans la plupart des langages de programmation,
                        nous pouvons créer et utiliser des fonctions.
                      </p>
                      <p>
                        Une fonction doit commencer par le type de la valeur qui
                        sera retournée :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float loremIpsum()
{
  float a = 1.0;
  float b = 2.0;

  return a + b;
}

</code></div></div></pre>
                      <p>
                        Si la fonction ne doit rien retourner, nous définissons
                        le type à <code>void</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void justDoingStuff()
{
  float a = 1.0;
  float b = 2.0;
}

</code></div></div></pre>
                      <p>
                        Nous pouvons spécifier des paramètres, mais nous devons
                        aussi fournir leur type :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
float add(float a, float b)
{
  return a + b;
}

</code></div></div></pre>
                      <p>
                        Cette fonction est, comme vous pouvez l'imaginer,
                        inutile.
                      </p>
                      <h4>Fonction native</h4>
                      <p>
                        GLSL dispose de nombreuses fonctions classiques
                        intégrées telles que <code>sin</code>, <code>cos</code>,
                        <code>max</code>, <code>min</code>, <code>pow</code>,
                        <code>exp</code>, <code>mod</code>, <code>clamp</code>,
                        mais aussi des fonctions très pratiques comme
                        <code>cross</code>, <code>dot</code>, <code>mix</code>,
                        <code>step</code>, <code>smoothstep</code>,
                        <code>length</code>, <code>distance</code>,
                        <code>reflect</code>, <code>refract</code>,
                        <code>normalize</code>.
                      </p>
                      <p>
                        Malheureusement, il n'y a pas de documentation
                        conviviale pour les débutants et, la plupart du temps,
                        nous faisons des recherches naïves sur le web et
                        finissons généralement sur ces trois sites :
                      </p>
                      <ul>
                        <li>
                          <p>
                            <strong>Shaderific documentation</strong><br /><a
                              rel="noopener"
                              target="_new"
                              style="
                                --streaming-animation-state: var(
                                  --batch-play-state-1
                                );
                                --animation-rate: var(--batch-play-rate-1);
                              "
                              href="https://shaderific.com/glsl.html"
                              ><span
                                style="
                                  --animation-count: 4;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >https</span
                              ><span
                                style="
                                  --animation-count: 5;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >://shaderific</span
                              ><span
                                style="
                                  --animation-count: 6;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >.com</span
                              ><span
                                style="
                                  --animation-count: 7;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >/glsl</span
                              ><span
                                style="
                                  --animation-count: 8;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >.html</span
                              ></a
                            ><br />Shaderific est une application iOS qui vous
                            permet de jouer avec GLSL. L'application n'est pas
                            très utile, mais la documentation n'est pas mal.
                          </p>
                        </li>
                        <li>
                          <p>
                            <strong>Kronos Group OpenGL reference pages</strong
                            ><br /><a
                              rel="noopener"
                              target="_new"
                              style="
                                --streaming-animation-state: var(
                                  --batch-play-state-1
                                );
                                --animation-rate: var(--batch-play-rate-1);
                              "
                              href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/indexflat.php"
                              ><span
                                style="
                                  --animation-count: 6;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >https</span
                              ><span
                                style="
                                  --animation-count: 7;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >://www</span
                              ><span
                                style="
                                  --animation-count: 8;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >.khronos</span
                              ><span
                                style="
                                  --animation-count: 9;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >.org</span
                              ><span
                                style="
                                  --animation-count: 10;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >/registry</span
                              ><span
                                style="
                                  --animation-count: 11;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >/OpenGL</span
                              ><span
                                style="
                                  --animation-count: 12;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >-Refpages</span
                              ><span
                                style="
                                  --animation-count: 13;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >/gl4</span
                              ><span
                                style="
                                  --animation-count: 14;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >/html</span
                              ><span
                                style="
                                  --animation-count: 15;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >/indexflat</span
                              ><span
                                style="
                                  --animation-count: 16;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >.php</span
                              ></a
                            ><br />Cette documentation concerne OpenGL, mais la
                            plupart des fonctions standard que vous verrez
                            seront compatibles avec WebGL. N'oublions pas que
                            WebGL n'est qu'une API JavaScript pour accéder à
                            OpenGL.
                          </p>
                        </li>
                        <li>
                          <p>
                            <strong>Book of Shaders documentation</strong
                            ><br /><a
                              rel="noopener"
                              target="_new"
                              style="
                                --streaming-animation-state: var(
                                  --batch-play-state-1
                                );
                                --animation-rate: var(--batch-play-rate-1);
                              "
                              href="https://thebookofshaders.com/"
                              ><span
                                style="
                                  --animation-count: 8;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >https</span
                              ><span
                                style="
                                  --animation-count: 9;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >://thebookofshaders</span
                              ><span
                                style="
                                  --animation-count: 10;
                                  --streaming-animation-state: var(
                                    --batch-play-state-2
                                  );
                                "
                                >.com/</span
                              ></a
                            ><br />Le <em>Book of Shaders</em> se concentre
                            principalement sur les <em>fragment shaders</em> et
                            n'a rien à voir avec Three.js, mais c'est une
                            excellente ressource pour apprendre et il possède
                            son propre glossaire.
                          </p>
                        </li>
                      </ul>
                      <h3>Comprendre le vertex shader</h3>
                      <p>
                        01:07:15<br />Maintenant que nous connaissons la syntaxe
                        GLSL, essayons de comprendre ce qui se passe dans nos
                        <em>shaders</em>.
                      </p>
                      <p>
                        Gardez à l'esprit que le but du
                        <em>vertex shader</em> est de positionner chaque sommet
                        de la géométrie dans l'espace 2D du rendu. En d'autres
                        termes, le <em>vertex shader</em> convertira les
                        coordonnées des sommets 3D en coordonnées de notre
                        <em>canvas</em> 2D.
                      </p>
                      <h4>Fonction main</h4>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void main()
{
}

</code></div></div></pre>
                      <p>
                        Cette fonction <code>main</code> sera appelée
                        automatiquement. Comme vous pouvez le voir, elle ne
                        retourne rien (<code>void</code>).
                      </p>
                      <h4>gl_Position</h4>
                      <p>
                        La variable <code>gl_Position</code> existe déjà. Nous
                        devons la définir. Cette variable contiendra la position
                        du sommet à l'écran. Le but des instructions dans la
                        fonction <code>main</code> est de définir cette variable
                        correctement.
                      </p>
                      <p>
                        À la fin de cette instruction, nous obtenons un
                        <code>vec4</code>. Cela signifie que nous pouvons
                        manipuler directement ses propriétés <code>x</code>,
                        <code>y</code>, <code>z</code> et <code>w</code> sur la
                        variable <code>gl_Position</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void main()
{
  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
  gl_Position.x += 0.5;
  gl_Position.y += 0.5;
}

</code></div></div></pre>
                      <p>
                        Le plan devrait se déplacer dans le coin supérieur
                        droit. Mais attention, nous n'avons pas réellement
                        déplacé le plan dans un espace 3D comme si nous
                        modifiions la position dans Three.js. Nous avons déplacé
                        le plan projeté dans un espace 2D.
                      </p>
                      <p>
                        Pensez-y comme un dessin que vous avez réalisé sur du
                        papier. Dans ce dessin, vous avez respecté la
                        perspective avec des points de fuite. Ensuite, vous
                        déplacez le dessin entier dans le coin supérieur droit
                        de votre bureau. La perspective n'a pas changé à
                        l'intérieur du dessin.
                      </p>
                      <p>
                        Vous vous demandez probablement pourquoi nous avons
                        besoin de 4 valeurs pour <code>gl_Position</code> alors
                        que son objectif final est de positionner les sommets
                        dans un espace 2D. En réalité, c'est parce que les
                        coordonnées ne sont pas précisément dans un espace 2D ;
                        elles sont dans ce que nous appelons un
                        <em>clip space</em> qui nécessite 4 dimensions.
                      </p>
                      <p>
                        Un <em>clip space</em> est un espace qui s'étend dans
                        les 3 directions (<code>x</code>, <code>y</code> et
                        <code>z</code>) dans une plage de -1 à +1. C'est comme
                        positionner tout dans une boîte 3D. Tout ce qui est en
                        dehors de cette plage sera "coupé" et disparaîtra. La
                        quatrième valeur (<code>w</code>) est responsable de la
                        perspective.
                      </p>
                      <p>
                        Heureusement, tout cela est automatique et, en tant que
                        débutant, nous n'avons pas besoin de tout maîtriser.
                        C'est juste pour la compréhension.
                      </p>
                      <p>
                        Mais que transmettons-nous exactement à ce
                        <code>gl_Position</code> ?
                      </p>
                      <h4>Attributs de position</h4>
                      <p>
                        Tout d'abord, nous récupérons la position du sommet avec
                        :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
attribute vec3 position;

</code></div></div></pre>
                      <p>
                        Rappelez-vous que le même code s'applique à tous les
                        sommets de la géométrie. Les <em>attributes</em> sont
                        les seules variables qui changent entre les sommets. Le
                        même <em>vertex shader</em> sera appliqué pour chaque
                        sommet et l'<em>attribute</em>
                        <code>position</code> contiendra les coordonnées
                        <code>x</code>, <code>y</code> et <code>z</code> de ce
                        sommet spécifique.
                      </p>
                      <p>
                        Ensuite, nous convertissons ce <code>vec3</code> en un
                        <code>vec4</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
gl_Position = /* ... */ vec4(position, 1.0);

</code></div></div></pre>
                      <p>
                        Cela est nécessaire car les matrices suivantes et
                        <code>gl_Position</code> doivent utiliser
                        <code>vec4</code> comme nous l'avons vu plus tôt.
                      </p>
                      <h4>Matrices uniforms</h4>
                      <p>
                        Chaque matrice transformera la position jusqu'à ce que
                        nous obtenions les coordonnées finales dans le
                        <em>clip space</em>.
                      </p>
                      <p>
                        Il y a 3 matrices dans notre code et, comme leurs
                        valeurs sont les mêmes pour tous les sommets de la
                        géométrie, nous les récupérons en utilisant des
                        <em>uniforms</em>.
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;

</code></div></div></pre>
                      <p>
                        Chaque matrice effectuera une partie de la
                        transformation :
                      </p>
                      <ul>
                        <li>
                          La <code>modelMatrix</code> appliquera toutes les
                          transformations relatives au <em>Mesh</em>. Si nous
                          mettons à l'échelle, tournons ou déplaçons le
                          <em>Mesh</em>, ces transformations seront contenues
                          dans la <code>modelMatrix</code> et appliquées à la
                          position.
                        </li>
                        <li>
                          La <code>viewMatrix</code> appliquera les
                          transformations relatives à la caméra. Si nous
                          tournons la caméra vers la gauche, les sommets
                          devraient être sur la droite. Si nous déplaçons la
                          caméra en direction du <em>Mesh</em>, les sommets
                          devraient devenir plus grands, etc.
                        </li>
                        <li>
                          La <code>projectionMatrix</code> transformera enfin
                          nos coordonnées dans les coordonnées finales du
                          <em>clip space</em>.
                        </li>
                      </ul>
                      <p>
                        Si vous souhaitez en savoir plus sur ces matrices et
                        coordonnées, voici un bon article :
                        <a
                          rel="noopener"
                          target="_new"
                          style="
                            --streaming-animation-state: var(
                              --batch-play-state-1
                            );
                            --animation-rate: var(--batch-play-rate-1);
                          "
                          href="https://learnopengl.com/Getting-started/Coordinate-Systems"
                          ><span
                            style="
                              --animation-count: 10;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >https</span
                          ><span
                            style="
                              --animation-count: 11;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >://learnopengl</span
                          ><span
                            style="
                              --animation-count: 12;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >.com</span
                          ><span
                            style="
                              --animation-count: 13;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/Getting</span
                          ><span
                            style="
                              --animation-count: 14;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-started</span
                          ><span
                            style="
                              --animation-count: 15;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >/Coordinate</span
                          ><span
                            style="
                              --animation-count: 16;
                              --streaming-animation-state: var(
                                --batch-play-state-2
                              );
                            "
                            >-Systems</span
                          ></a
                        >.
                      </p>
                      <p>
                        Pour appliquer une matrice, nous la multiplions. Si nous
                        voulons appliquer un <code>mat4</code> à une variable,
                        cette variable doit être un <code>vec4</code>. Nous
                        pouvons également multiplier des matrices avec d'autres
                        matrices :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);

</code></div></div></pre>
                      <p>
                        Il existe en réalité une version plus courte où la
                        <code>viewMatrix</code> et la
                        <code>modelMatrix</code> sont combinées en une
                        <code>modelViewMatrix</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

attribute vec3 position;

void main()
{
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}

</code></div></div></pre>
                      <p>
                        C'est plus court, mais nous avons moins de contrôle sur
                        chaque étape.
                      </p>
                      <p>
                        Nous allons en fait rendre notre code encore plus long
                        pour mieux comprendre et avoir plus de contrôle sur la
                        position :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;

attribute vec3 position;

void main()
{
  vec4 modelPosition = modelMatrix * vec4(position, 1.0);
  vec4 viewPosition = viewMatrix * modelPosition;
  vec4 projectedPosition = projectionMatrix * viewPosition;
  
  gl_Position = projectedPosition;
}

</code></div></div></pre>
                      <p>
                        Ces changements ont exactement le même résultat, mais
                        nous pouvons maintenant déplacer le modèle entier en
                        modifiant simplement les valeurs de
                        <code>modelPosition</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void main()
{
  vec4 modelPosition = modelMatrix * vec4(position, 1.0);
  modelPosition.y += 1.0;

  // ...
}

</code></div></div></pre>
                    </div>
                  </div>
                </div>
              </div>
              <div class="pr-2 lg:pr-0"></div>
              <div class="mt-3 w-full empty:hidden">
                <div class="text-center"></div>
                <p class="is-image">
                  <span class="image-inner"
                    ><img
                      data-src="/assets/lessons/24/003.png"
                      src="https://threejs-journey.com/assets/lessons/24/003.png"
                      width="1792"
                      height="1120"
                      class="is-loaded"
                  /></span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article
      class="w-full text-token-text-primary focus-visible:outline-2 focus-visible:outline-offset-[-4px]"
      dir="auto"
      data-testid="conversation-turn-11"
      data-scroll-anchor="true"
    >
      <h6 class="sr-only">ChatGPT a dit&nbsp;:</h6>
      <div
        class="text-base py-[18px] px-3 md:px-4 m-auto w-full md:px-5 lg:px-4 xl:px-5"
      >
        <div
          class="mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]"
        >
          <div
            class="group/conversation-turn relative flex w-full min-w-0 flex-col agent-turn"
          >
            <div class="flex-col gap-1 md:gap-3">
              <div class="flex max-w-full flex-col flex-grow">
                <div
                  data-message-author-role="assistant"
                  data-message-id="c5276cb1-5a72-4e3e-9558-c240a997ccc7"
                  dir="auto"
                  class="text-message flex w-full flex-col items-end gap-2 whitespace-normal break-words [.text-message+&amp;]:mt-5"
                >
                  <div
                    class="flex w-full flex-col gap-1 empty:hidden first:pt-[3px]"
                  >
                    <div
                      class="markdown prose w-full break-words dark:prose-invert dark"
                    >
                      <h3>Le plan entier devrait apparaître plus haut.</h3>
                      <p>
                        Ou nous pouvons faire des choses plus cool comme
                        transformer notre plan en vague :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void main()
{
  vec4 modelPosition = modelMatrix * vec4(position, 1.0);
  modelPosition.z += sin(modelPosition.x * 10.0) * 0.1;

  // ...
}

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/004.png"
                            src="https://threejs-journey.com/assets/lessons/24/004.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Nous avons modifié l'axe <code>z</code> en utilisant la
                        coordonnée <code>x</code> via une fonction
                        <code>sin(...)</code>. Bonne chance pour obtenir ce
                        résultat avec les matériaux intégrés de Three.js.
                      </p>
                      <h3>Comprendre le fragment shader</h3>
                      <p>
                        01:23:13<br />Le code du <em>fragment shader</em> sera
                        appliqué à chaque <em>fragment</em> visible de la
                        géométrie. C'est pourquoi le
                        <em>fragment shader</em> vient après le
                        <em>vertex shader</em>.
                      </p>
                      <p>
                        Le code est plus simple que celui du
                        <em>vertex shader</em>.
                      </p>
                      <h4>Fonction main</h4>
                      <p>
                        Encore une fois, nous rencontrons la fonction
                        <code>main</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void main()
{
}

</code></div></div></pre>
                      <h4>Précision</h4>
                      <p>
                        Nous avons également une instruction en haut du code :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
precision mediump float;

</code></div></div></pre>
                      <p>
                        Cette instruction nous permet de définir la précision
                        d'un float. Il existe différentes valeurs possibles :
                      </p>
                      <ul>
                        <li><code>highp</code></li>
                        <li><code>mediump</code></li>
                        <li><code>lowp</code></li>
                      </ul>
                      <p>
                        <code>highp</code> peut avoir un impact sur les
                        performances et ne pas fonctionner sur certains
                        appareils. <code>lowp</code> peut créer des bugs par
                        manque de précision. Nous utilisons généralement
                        <code>mediump</code>. Nous pourrions également définir
                        la précision pour le <em>vertex shader</em>, mais ce
                        n'est pas nécessaire.
                      </p>
                      <p>
                        Cette partie est gérée automatiquement lorsque nous
                        utilisons <code>ShaderMaterial</code> au lieu de
                        <code>RawShaderMaterial</code>.
                      </p>
                      <h4>gl_FragColor</h4>
                      <p>
                        <code>gl_FragColor</code> est comme
                        <code>gl_Position</code> mais pour la couleur. Elle est
                        déjà déclarée, et nous devons lui assigner une valeur
                        dans la fonction <code>main</code>.
                      </p>
                      <p>
                        C'est un <code>vec4</code> dont les trois premières
                        valeurs représentent les canaux rouge, vert et bleu (r,
                        g, b) et la quatrième valeur représente l'alpha (a) :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
gl_FragColor = vec4(0.5, 0.0, 1.0, 1.0);

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/005.png"
                            src="https://threejs-journey.com/assets/lessons/24/005.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Ce code produira une couleur violette sur toute la
                        géométrie.
                      </p>
                      <p>
                        Chaque propriété de <code>gl_FragColor</code> va de
                        <code>0.0</code> à <code>1.0</code>. Nous pouvons
                        dépasser ces valeurs sans erreur, mais cela ne nous sera
                        d'aucune utilité.
                      </p>
                      <p>
                        Si nous voulons définir un alpha inférieur à
                        <code>1.0</code>, nous devons également définir la
                        propriété <code>transparent</code> à
                        <code>true</code> dans le
                        <code>RawShaderMaterial</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>
})

</code></div></div></pre>
                      <h3>Attributs</h3>
                      <p>
                        01:27:09<br />Les <em>attributes</em> sont des valeurs
                        qui changent entre chaque sommet. Nous avons déjà un
                        <em>attribute</em> nommé <code>position</code> qui
                        contient un <code>vec3</code> des coordonnées de chaque
                        sommet.
                      </p>
                      <p>
                        Nous pouvons ajouter nos propres
                        <em>attributes</em> directement dans le
                        <code>BufferGeometry</code> comme nous l'avons fait lors
                        de la leçon sur les géométries.
                      </p>
                      <p>
                        Pour cette leçon, nous allons ajouter une valeur
                        aléatoire pour chaque sommet et déplacer ce sommet sur
                        l'axe <code>z</code> en fonction de cette valeur.
                      </p>
                      <p>
                        Revenons au JavaScript et créons un
                        <code>Float32Array</code> de la bonne taille juste après
                        avoir créé la géométrie. Pour savoir combien de sommets
                        nous avons dans la géométrie, nous pouvons utiliser
                        l'<em>attribute</em> <code>position</code> déjà existant
                        :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> count = geometry.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">count</span>
<span class="hljs-keyword">const</span> randoms = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(count)

</code></div></div></pre>
                      <p>
                        Ensuite, nous remplissons ce tableau avec des valeurs
                        aléatoires :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i++)
{
  randoms[i] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()
}

</code></div></div></pre>
                      <p>
                        Enfin, nous utilisons ce tableau dans un
                        <code>BufferAttribute</code> et l'ajoutons aux
                        <em>attributes</em> de notre géométrie :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'aRandom'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(randoms, <span class="hljs-number">1</span>))

</code></div></div></pre>
                      <p>
                        Le premier paramètre de
                        <code>setAttribute(...)</code> est le nom de
                        l'<em>attribute</em>. C'est le nom que nous utiliserons
                        dans le <em>shader</em>. Nous pouvons choisir n'importe
                        quel nom, mais il est conseillé de préfixer avec
                        <code>a</code> pour "attribute".
                      </p>
                      <p>
                        Le premier paramètre de <code>BufferAttribute</code> est
                        le tableau de données et le second paramètre est le
                        nombre de valeurs qui composent un <em>attribute</em>.
                        Si nous devions envoyer une position, nous utiliserions
                        3 car les positions sont composées de 3 valeurs (x, y et
                        z). Mais ici, c'est juste 1 valeur aléatoire par sommet,
                        donc nous utilisons 1.
                      </p>
                      <p>
                        Nous pouvons maintenant récupérer cet
                        <em>attribute</em> dans le <em>vertex shader</em> et
                        l'utiliser pour déplacer les sommets :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...
attribute float aRandom;

void main()
{
  // ...
  modelPosition.z += aRandom * 0.1;

  // ...
}

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/006.png"
                            src="https://threejs-journey.com/assets/lessons/24/006.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Vous obtenez maintenant un plan composé de pointes
                        aléatoires.
                      </p>
                      <h3>Varyings</h3>
                      <p>
                        01:32:57<br />Nous voulons maintenant colorier les
                        <em>fragments</em> avec l'<em>attribute</em>
                        <code>aRandom</code>.
                      </p>
                      <p>
                        Malheureusement, nous ne pouvons pas utiliser des
                        <em>attributes</em> directement dans le
                        <em>fragment shader</em>.
                      </p>
                      <p>
                        Heureusement, il existe un moyen d'envoyer des données
                        du <em>vertex shader</em> au
                        <em>fragment shader</em> appelé <em>varyings</em>.
                      </p>
                      <p>
                        Nous devons le faire dans les deux <em>shaders</em>.
                      </p>
                      <p>
                        Dans le <em>vertex shader</em>, nous devons créer le
                        <em>varying</em> avant la fonction <code>main</code>.
                        Nous appellerons notre <em>varying</em>
                        <code>vRandom</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...

varying float vRandom;

void main()
{
  // ...

</code></div></div></pre>
                      <p>
                        Vous pouvez nommer votre <em>varying</em> comme vous le
                        souhaitez, mais je recommande de le préfixer avec
                        <code>v</code> pour les distinguer facilement.
                      </p>
                      <p>
                        Ensuite, nous mettons à jour la valeur du
                        <em>varying</em> dans la fonction <code>main</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
varying float vRandom;

void main()
{
  // ...

  vRandom = aRandom;
}

</code></div></div></pre>
                      <p>
                        Enfin, nous récupérons la valeur du
                        <em>varying</em> dans le <em>fragment shader</em> avec
                        la même déclaration, et nous l'utilisons comme nous le
                        souhaitons dans la fonction <code>main</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
precision mediump float;

varying float vRandom;

void main()
{
  gl_FragColor = vec4(0.5, vRandom, 1.0, 1.0);
}

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/007.png"
                            src="https://threejs-journey.com/assets/lessons/24/007.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Vous obtenez maintenant une forme spectaculaire avec des
                        pointes colorées.
                      </p>
                      <p>
                        Une chose intéressante avec les <em>varyings</em> est
                        que les valeurs entre les sommets sont interpolées. Si
                        le GPU dessine un fragment juste entre deux sommets —
                        l'un ayant un <em>varying</em> de <code>1.0</code> et
                        l'autre ayant un <em>varying</em> de <code>0.0</code> —
                        la valeur du fragment sera <code>0.5</code>.
                      </p>
                      <p>
                        Retirons ou commentons la partie de l'élévation et le
                        <em>varying</em>, afin de revenir à notre plan violet.
                      </p>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/007.png"
                            src="https://threejs-journey.com/assets/lessons/24/007.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <h3>Uniforms</h3>
                      <p>
                        01:37:40<br />Les <em>uniforms</em> sont un moyen
                        d'envoyer des données du JavaScript au <em>shader</em>.
                      </p>
                      <p>
                        Cela peut être utile si nous voulons utiliser le même
                        <em>shader</em> avec différents paramètres, et c'est
                        aussi l'occasion d'avoir des paramètres qui peuvent
                        changer pendant l'expérience.
                      </p>
                      <p>
                        Nous pouvons utiliser les <em>uniforms</em> avec les
                        <em>vertex</em> et <em>fragment shaders</em>, et les
                        données seront les mêmes pour chaque sommet et chaque
                        fragment. Nous avons déjà des <em>uniforms</em> dans
                        notre code avec <code>projectionMatrix</code>,
                        <code>viewMatrix</code> et <code>modelMatrix</code>,
                        mais nous ne les avons pas créés. Three.js l'a fait.
                      </p>
                      <p>Créons nos propres <em>uniforms</em>.</p>
                      <p>
                        Pour ajouter des <em>uniforms</em> à notre matériau,
                        utilisez la propriété <code>uniforms</code>. Nous allons
                        faire en sorte que notre plan ondule et nous voulons
                        contrôler la fréquence des vagues :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">uniforms</span>:
  {
      <span class="hljs-attr">frequency</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> }
  }
})

</code></div></div></pre>
                      <p>
                        Ici, le nom de l'uniforme que nous avons choisi est
                        <code>frequency</code>. Bien que ce ne soit pas
                        obligatoire, il est conseillé de préfixer avec la lettre
                        <code>u</code> pour distinguer les "uniforms" des autres
                        données.
                      </p>
                      <p>
                        Changeons le nom de l'uniforme en
                        <code>uFrequency</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">uniforms</span>:
  {
      <span class="hljs-attr">uFrequency</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> }
  }
})

</code></div></div></pre>
                      <p>
                        Si vous consultez d'autres tutoriels ou exemples, vous
                        pourriez voir les <em>uniforms</em> déclarés ainsi :
                        <code>uFrequency: { value: 10, type: 'float' }</code>.
                        Il fut un temps où nous devions spécifier le type, mais
                        cela est maintenant obsolète.
                      </p>
                      <p>
                        Nous pouvons maintenant récupérer la valeur dans notre
                        code <em>shader</em> et l'utiliser dans notre fonction
                        <code>main</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;
uniform float uFrequency;

attribute vec3 position;

void main()
{
  // ...
  modelPosition.z += sin(modelPosition.x * uFrequency) * 0.1;

  // ...
}

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/009.png"
                            src="https://threejs-journey.com/assets/lessons/24/009.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Le résultat est le même, mais nous pouvons maintenant
                        contrôler la fréquence depuis le JavaScript.
                      </p>
                      <p>
                        Changeons notre fréquence en un <code>vec2</code> pour
                        contrôler les vagues horizontalement et verticalement.
                        Nous utilisons simplement un <code>Vector2</code> de
                        Three.js :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">uniforms</span>:
  {
      <span class="hljs-attr">uFrequency</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector2</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>) }
  }
})

</code></div></div></pre>
                      <p>
                        Dans notre <em>shader</em>, nous remplaçons le
                        <code>float</code> par un <code>vec2</code> et
                        appliquons le déplacement sur l'axe <code>z</code> en
                        utilisant également l'axe <code>y</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...
uniform vec2 uFrequency;

// ...

void main()
{
  // ...
  modelPosition.z += sin(modelPosition.x * uFrequency.x) * 0.1;
  modelPosition.z += sin(modelPosition.y * uFrequency.y) * 0.1;

  // ...
}

</code></div></div></pre>
                      <p class="is-image">
                        <span class="image-inner"
                          ><img
                            data-src="/assets/lessons/24/009.png"
                            src="https://threejs-journey.com/assets/lessons/24/010.png"
                            width="1792"
                            height="1120"
                            class="is-loaded"
                        /></span>
                      </p>
                      <p>
                        Prenez votre temps pour cela. Il est facile de faire des
                        erreurs.
                      </p>
                      <p>
                        Comme ces valeurs sont maintenant contrôlées dans le
                        JavaScript, nous pouvons les ajouter à notre
                        <code>lil-gui</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
gui.<span class="hljs-title function_">add</span>(material.<span class="hljs-property">uniforms</span>.<span class="hljs-property">uFrequency</span>.<span class="hljs-property">value</span>, <span class="hljs-string">'x'</span>).<span class="hljs-title function_">min</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">max</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">step</span>(<span class="hljs-number">0.01</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">'frequencyX'</span>)
gui.<span class="hljs-title function_">add</span>(material.<span class="hljs-property">uniforms</span>.<span class="hljs-property">uFrequency</span>.<span class="hljs-property">value</span>, <span class="hljs-string">'y'</span>).<span class="hljs-title function_">min</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">max</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">step</span>(<span class="hljs-number">0.01</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">'frequencyY'</span>)

</code></div></div></pre>
                      <video
                        class="js-element element"
                        width="1792"
                        height="1120"
                        controls=""
                        src="https://threejs-journey.com/assets/lessons/24/011.mp4"
                      ></video>
                      <p>
                        Ajoutons un nouvel <em>uniform</em> pour animer notre
                        plan comme un drapeau au vent. Nous envoyons une valeur
                        de temps au <em>shader</em> en utilisant un
                        <em>uniform</em> et nous utilisons cette valeur à
                        l'intérieur de la fonction <code>sin(...)</code>. Tout
                        d'abord, mettez à jour le matériau pour ajouter
                        l'uniforme <code>uTime</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">uniforms</span>:
  {
      <span class="hljs-attr">uFrequency</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector2</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>) },
      <span class="hljs-attr">uTime</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> }
  }
})

</code></div></div></pre>
                      <p>
                        Ensuite, mettez à jour cet <em>uniform</em>
                        <code>uTime</code> dans la fonction <code>tick</code>.
                        Pour ce faire, utilisez la fonction
                        <code>getElapsedTime</code> de l'objet
                        <code>Clock</code> pour savoir combien de temps s'est
                        écoulé :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">tick</span> = (<span class="hljs-params"></span>) =&gt;
{
  <span class="hljs-keyword">const</span> elapsedTime = clock.<span class="hljs-title function_">getElapsedTime</span>()

  <span class="hljs-comment">// Met à jour le matériau</span>
  material.<span class="hljs-property">uniforms</span>.<span class="hljs-property">uTime</span>.<span class="hljs-property">value</span> = elapsedTime

  <span class="hljs-comment">// ...</span>
}

</code></div></div></pre>
                      <p>
                        Enfin, nous récupérons la valeur de l'<em>uniform</em>
                        dans notre <em>vertex shader</em> et l'utilisons dans
                        les deux fonctions <code>sin(...)</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...
uniform float uTime;

// ...

void main()
{
  // ...
  modelPosition.z += sin(modelPosition.x * uFrequency.x + uTime) * 0.1;
  modelPosition.z += sin(modelPosition.y * uFrequency.y + uTime) * 0.1;

  // ...
}

</code></div></div></pre>
                      <video
                        class="js-element element"
                        width="1792"
                        height="1120"
                        controls=""
                        src="https://threejs-journey.com/assets/lessons/24/012.mp4"
                      ></video>
                      <p>
                        Vous devriez voir le drapeau onduler comme s'il volait
                        au vent.
                      </p>
                      <p>
                        Invertons la direction en utilisant un
                        <code>-</code> avant <code>uTime</code> au lieu d'un
                        <code>+</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
modelPosition.z += sin(modelPosition.x * uFrequency.x - uTime) * 0.1;
modelPosition.z += sin(modelPosition.y * uFrequency.y - uTime) * 0.1;

</code></div></div></pre>
                      <video
                        class="js-element element"
                        width="1792"
                        height="1120"
                        controls=""
                        src="https://threejs-journey.com/assets/lessons/24/013.mp4"
                      ></video>
                      <p>
                        Attention avec <code>uTime</code> : si nous utilisions
                        la solution native JavaScript comme
                        <code>Date.now()</code>, cela ne fonctionnerait pas. En
                        effet, <code>Date.now()</code> retourne le nombre de
                        millisecondes écoulées depuis le 1er janvier 1970 et
                        cette valeur est trop grande pour un <em>shader</em>.
                        Pour simplifier, souvenez-vous que nous ne pouvons pas
                        envoyer de valeurs d'<em>uniforms</em> trop grandes ou
                        trop petites.
                      </p>
                      <p>
                        N'oubliez pas qu'il s'agit toujours d'un plan et que
                        nous pouvons transformer le <em>Mesh</em> comme nous en
                        avons l'habitude. Donnons à notre plan une forme de
                        drapeau.
                      </p>
                      <p>
                        Nous pourrions le faire dans le <em>shader</em> en
                        multipliant la valeur de
                        <code>modelPosition.y</code> mais n'oubliez pas que vous
                        pouvez toujours changer la position, l'échelle et la
                        rotation directement sur le maillage :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material)
mesh.<span class="hljs-property">scale</span>.<span class="hljs-property">y</span> = <span class="hljs-number">2</span> / <span class="hljs-number">3</span>
scene.<span class="hljs-title function_">add</span>(mesh)

</code></div></div></pre>
                      <video
                        class="js-element element"
                        width="1792"
                        height="1120"
                        controls=""
                        src="https://threejs-journey.com/assets/lessons/24/014.mp4"
                      ></video>
                      <p>
                        Les <em>uniforms</em> sont également disponibles dans le
                        <em>fragment shader</em>. Ajoutons un nouvel
                        <em>uniform</em> pour contrôler la couleur. Pour une
                        valeur de couleur, nous pouvons utiliser un
                        <code>Color</code> de Three.js :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: testVertexShader,
  <span class="hljs-attr">fragmentShader</span>: testFragmentShader,
  <span class="hljs-attr">uniforms</span>:
  {
      <span class="hljs-attr">uFrequency</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector2</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>) },
      <span class="hljs-attr">uTime</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> },
      <span class="hljs-attr">uColor</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-string">'orange'</span>) }
  }
})

</code></div></div></pre>
                      <p>
                        Ensuite, dans notre <em>fragment shader</em>, nous
                        récupérons la valeur et l'utilisons dans notre
                        <code>vec4</code> <code>gl_FragColor</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
precision mediump float;

uniform vec3 uColor;

void main()
{
  gl_FragColor = vec4(uColor, 1.0);
}

</code></div></div></pre>
                      <img
                        data-src="/assets/lessons/24/015.png"
                        src="https://threejs-journey.com/assets/lessons/24/015.png"
                        width="1792"
                        height="1120"
                        class="is-loaded"
                      />
                      <p>Le drapeau devrait maintenant être orange.</p>
                      <h3>Textures</h3>
                      <p>
                        01:54:39<br />Les textures sont un peu plus complexes,
                        mais nous avons presque tout ce dont nous avons besoin.
                      </p>
                      <p>
                        Tout d'abord, nous devons charger une texture comme nous
                        l'avons fait dans les leçons précédentes. Nous avons
                        déjà une texture de drapeau dans le dossier
                        <code>/static/textures/</code> et nous pouvons utiliser
                        le <code>textureLoader</code> déjà disponible dans le
                        fichier de démarrage JavaScript :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> flagTexture = textureLoader.<span class="hljs-title function_">load</span>(<span class="hljs-string">'/textures/flag-french.jpg'</span>)

</code></div></div></pre>
                      <p>
                        Ensuite, nous pouvons envoyer la texture en tant
                        qu'<em>uniform</em>. Nous allons l'appeler
                        <code>uTexture</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RawShaderMaterial</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">uniforms</span>:
  {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">uTexture</span>: { <span class="hljs-attr">value</span>: flagTexture }
  }
})

</code></div></div></pre>
                      <p>
                        Bien qu'il soit tentant de l'envoyer directement au
                        <em>fragment shader</em>, nous avons un problème. Pour
                        prendre les couleurs des <em>fragments</em> d'une
                        texture et les appliquer dans le
                        <em>fragment shader</em>, nous devons utiliser la
                        fonction <code>texture2D(...)</code>. Le premier
                        paramètre de <code>texture2D(...)</code> est la texture
                        (facile, c'est notre <code>uTexture</code>), mais le
                        second paramètre est constitué des coordonnées indiquant
                        où prendre la couleur sur cette texture, et nous n'avons
                        pas encore ces coordonnées.
                      </p>
                      <p>
                        Ces informations devraient vous sembler familières. Nous
                        recherchons des coordonnées qui devraient nous aider à
                        projeter une texture sur une géométrie. Nous parlons des
                        coordonnées UV.
                      </p>
                      <p>
                        La <code>PlaneGeometry</code> génère automatiquement ces
                        coordonnées, et nous pouvons le vérifier en affichant
                        <code>geometry.attributes.uv</code> dans la console.
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(geometry.<span class="hljs-property">attributes</span>.<span class="hljs-property">uv</span>)

</code></div></div></pre>
                      <p>
                        Comme c'est un <em>attribute</em>, nous pouvons le
                        récupérer dans le <em>vertex shader</em> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
attribute vec2 uv;

</code></div></div></pre>
                      <p>
                        Nous avons encore besoin de ces coordonnées dans le
                        <em>fragment shader</em>. Pour envoyer des données du
                        <em>vertex shader</em> au <em>fragment shader</em>, nous
                        devons créer un <em>varying</em>. Nous allons appeler ce
                        <em>varying</em> <code>vUv</code> et mettre à jour sa
                        valeur dans la fonction <code>main</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...
attribute vec2 uv;

varying vec2 vUv;

void main()
{
  // ...

  vUv = uv;
}

</code></div></div></pre>
                      <p>
                        Nous pouvons maintenant récupérer le <em>varying</em>
                        <code>vUv</code> dans le <em>fragment shader</em>,
                        récupérer l'<em>uniform</em> <code>uTexture</code> et
                        finalement obtenir la couleur du <em>fragment</em> avec
                        <code>texture2D(...)</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
precision mediump float;

uniform vec3 uColor;
uniform sampler2D uTexture;

varying vec2 vUv;

void main()
{
  vec4 textureColor = texture2D(uTexture, vUv);
  gl_FragColor = textureColor;
}

</code></div></div></pre>
                      <img
                        data-src="/assets/lessons/24/016.png"
                        src="https://threejs-journey.com/assets/lessons/24/016.png"
                        width="1792"
                        height="1120"
                        class="is-loaded"
                      />
                      <p>
                        La sortie de <code>texture2D(...)</code> est un
                        <code>vec4</code> car il contient r, g, b, et a — même
                        si notre texture n'a pas de variation d'alpha.
                      </p>
                      <p>Vous devriez obtenir un beau drapeau.</p>
                      <p>
                        Encore une fois, prenez votre temps. Il est facile de
                        faire des erreurs ici.
                      </p>
                      <h3>Variations de couleur</h3>
                      <p>
                        02:03:20<br />La couleur de notre drapeau ne varie pas
                        beaucoup. Ce serait bien d'avoir une variation de
                        luminosité, comme s'il y avait des ombres.
                      </p>
                      <p>
                        La technique que nous allons utiliser n'est pas
                        physiquement précise, mais elle devrait faire l'affaire.
                      </p>
                      <p>
                        Tout d'abord, dans le <em>vertex shader</em>, nous
                        allons stocker l'élévation du vent dans une variable :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
void main()
{
  // ...

  float elevation = sin(modelPosition.x * uFrequency.x - uTime) * 0.1;
  elevation += sin(modelPosition.y * uFrequency.y - uTime) * 0.1;
  
  modelPosition.z += elevation;

  // ...
}

</code></div></div></pre>
                      <p>
                        Ensuite, nous envoyons l'élévation au
                        <em>fragment</em> en utilisant un <em>varying</em> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...
varying float vElevation;

void main()
{
  // ...

  vElevation = elevation;
}

</code></div></div></pre>
                      <p>
                        Enfin, nous récupérons le <em>varying</em>
                        <code>vElevation</code> dans notre
                        <em>fragment shader</em>, et l'utilisons pour changer
                        les propriétés r, g et b de notre
                        <code>textureColor</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
// ...
varying float vElevation;

void main()
{
  vec4 textureColor = texture2D(uTexture, vUv);
  textureColor.rgb *= vElevation * 2.0 + 0.5;
  gl_FragColor = textureColor;
}

</code></div></div></pre>
                      <video
                        class="js-element element"
                        width="1792"
                        height="1120"
                        controls=""
                        src="https://threejs-journey.com/assets/lessons/24/017.mp4"
                      ></video>
                      <p>
                        Vous devriez voir des variations de luminosité sur le
                        drapeau comme s'il y avait de la lumière et des ombres.
                        C'est une technique simple, mais elle fonctionne.
                      </p>
                      <h3>ShaderMaterial</h3>
                      <p>
                        02:08:30<br />Jusqu'à présent, nous avons utilisé
                        <code>RawShaderMaterial</code>.
                        <code>ShaderMaterial</code> fonctionne de la même
                        manière, mais avec des <em>uniforms</em> et
                        <em>attributes</em> préconstruits ajoutés en tête des
                        codes <em>shader</em>. La précision sera également
                        définie automatiquement.
                      </p>
                      <p>
                        Pour l'utiliser, remplacez simplement votre
                        <code>RawShaderMaterial</code> par
                        <code>ShaderMaterial</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">javascript</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-javascript">
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
  <span class="hljs-comment">// ...</span>

</code></div></div></pre>
                      <p>
                        Puis supprimez les <em>uniforms</em>,
                        <em>attributes</em> et <code>precision</code> suivants
                        dans les deux <em>shaders</em> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;
attribute vec3 position;
attribute vec2 uv;
precision mediump float;
uniform vec2 uFrequency;
uniform float uTime;

attribute float aRandom;

varying float vElevation;
varying vec2 vUv;

void main()
{
  // ...
}

</code></div></div></pre>
                      <p>
                        Le <em>shader</em> devrait fonctionner comme avant car
                        <code>ShaderMaterial</code> ajoutera ces éléments
                        automatiquement.
                      </p>
                      <h3>Débogage</h3>
                      <p>
                        02:10:28<br />Déboguer un <em>shader</em> est difficile.
                        Nous ne pouvons pas enregistrer les données comme en
                        JavaScript car c'est le GPU qui exécute le code du
                        <em>shader</em> et il le fait pour chaque sommet et
                        chaque fragment.
                      </p>
                      <p>
                        Heureusement pour nous, Three.js fait un excellent
                        travail en transmettant les erreurs à la compilation.
                      </p>
                      <h4>Trouver l'erreur</h4>
                      <p>
                        Si nous oublions un point-virgule, Three.js affichera le
                        <em>shader</em> complet et nous indiquera la ligne où
                        l'erreur s'est produite avec une brève description comme
                        <code>ERROR: 0:71: 'vec4' : syntax error</code>.
                      </p>
                      <p>
                        Ce message signifie que l'erreur s'est produite à la
                        ligne 71, mais le problème peut provenir de la ligne
                        juste avant. Prenez votre temps, lisez l'erreur, et vous
                        trouverez ce qui ne va pas.
                      </p>
                      <h4>Lire le shader</h4>
                      <p>
                        Avoir le code complet du <em>shader</em> affiché est
                        également un excellent moyen de voir ce que Three.js
                        ajoute à nos <em>shaders</em> lorsque nous utilisons un
                        <code>ShaderMaterial</code>.
                      </p>
                      <h4>Tester des valeurs</h4>
                      <p>
                        Une autre solution pour déboguer des valeurs est de les
                        utiliser dans le <code>gl_FragColor</code>. Ce n'est pas
                        précis car tout ce que nous pouvons voir ce sont des
                        variations de couleur, mais parfois cela suffit.
                      </p>
                      <p>
                        Si les valeurs se trouvent dans le
                        <em>vertex shader</em>, nous pouvons utiliser un
                        <em>varying</em> pour les transmettre au
                        <em>fragment shader</em>.
                      </p>
                      <p>
                        Disons que nous voulons voir à quoi ressemble
                        l'<code>uv</code>. Nous pouvons l'envoyer au
                        <em>fragment</em> avec un <em>varying</em> — déjà fait
                        avec <code>vUv</code> — et l'utiliser dans le
                        <code>gl_FragColor</code> :
                      </p>
                      <pre
                        class="!overflow-visible"
                      ><div class="dark bg-gray-950 contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative"><div class="flex items-center text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9">glsl</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-main-surface-secondary px-2 font-sans text-xs text-token-text-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-glsl">
gl_FragColor = vec4(vUv, 1.0, 1.0);

</code></div></div></pre>
                      <img
                        data-src="/assets/lessons/24/018.png"
                        src="https://threejs-journey.com/assets/lessons/24/018.png"
                        width="1792"
                        height="1120"
                        class="is-loaded"
                      />
                      <h3>Aller plus loin</h3>
                      <p>
                        02:14:47<br />Une fois que nous comprenons les bases des
                        <em>shaders</em>, tout est une question de pratique. Vos
                        premiers <em>shaders</em> prendront d'innombrables
                        heures, mais vous apprendrez des techniques que vous
                        utiliserez fréquemment.
                      </p>
                      <p>
                        Dans les prochaines leçons, nous pratiquerons ces
                        techniques et apprendrons même à dessiner des formes
                        dans les <em>shaders</em>, mais si vous voulez aller
                        plus loin, voici quelques liens :
                      </p>
                      <ul>
                        <li>
                          <strong>The Book of Shaders</strong> :
                          <a
                            rel="noopener"
                            target="_new"
                            style="
                              --streaming-animation-state: var(
                                --batch-play-state-1
                              );
                              --animation-rate: var(--batch-play-rate-1);
                            "
                            href="https://thebookofshaders.com/"
                            ><span
                              style="
                                --animation-count: 8;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >https</span
                            ><span
                              style="
                                --animation-count: 9;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >://thebookofshaders</span
                            ><span
                              style="
                                --animation-count: 10;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.com/</span
                            ></a
                          >
                        </li>
                        <li>
                          <strong>ShaderToy</strong> :
                          <a
                            rel="noopener"
                            target="_new"
                            style="
                              --streaming-animation-state: var(
                                --batch-play-state-1
                              );
                              --animation-rate: var(--batch-play-rate-1);
                            "
                            href="https://www.shadertoy.com/"
                            ><span
                              style="
                                --animation-count: 10;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >https</span
                            ><span
                              style="
                                --animation-count: 11;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >://www</span
                            ><span
                              style="
                                --animation-count: 12;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.shadertoy</span
                            ><span
                              style="
                                --animation-count: 13;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.com/</span
                            ></a
                          >
                        </li>
                        <li>
                          <strong>The Art of Code Youtube Channel</strong> :
                          <a
                            rel="noopener"
                            target="_new"
                            style="
                              --streaming-animation-state: var(
                                --batch-play-state-1
                              );
                              --animation-rate: var(--batch-play-rate-1);
                            "
                            href="https://www.youtube.com/channel/UCcAlTqd9zID6aNX3TzwxJXg"
                            ><span
                              style="
                                --animation-count: 12;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >https</span
                            ><span
                              style="
                                --animation-count: 13;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >://www</span
                            ><span
                              style="
                                --animation-count: 14;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.youtube</span
                            ><span
                              style="
                                --animation-count: 15;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.com</span
                            ><span
                              style="
                                --animation-count: 16;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >/channel</span
                            ><span
                              style="
                                --animation-count: 17;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >/UCcAlTqd9zID6aNX3TzwxJXg</span
                            ></a
                          >
                        </li>
                        <li>
                          <strong>Lewis Lepton Youtube Channel</strong> :
                          <a
                            rel="noopener"
                            target="_new"
                            style="
                              --streaming-animation-state: var(
                                --batch-play-state-1
                              );
                              --animation-rate: var(--batch-play-rate-1);
                            "
                            href="https://www.youtube.com/channel/UC8Wzk_R1GoPkPqLo-obU_kQ"
                            ><span
                              style="
                                --animation-count: 14;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >https</span
                            ><span
                              style="
                                --animation-count: 15;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >://www</span
                            ><span
                              style="
                                --animation-count: 16;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.youtube</span
                            ><span
                              style="
                                --animation-count: 17;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >.com</span
                            ><span
                              style="
                                --animation-count: 18;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >/channel</span
                            ><span
                              style="
                                --animation-count: 19;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >/UC8Wzk_R1GoPkPqLo</span
                            ><span
                              style="
                                --animation-count: 20;
                                --streaming-animation-state: var(
                                  --batch-play-state-2
                                );
                              "
                              >-obU_kQ</span
                            ></a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <canvas class="webgl"></canvas>

    <script type="module" src="./script.js"></script>
  </body>
</html>
